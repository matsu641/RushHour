## Rush Hourï¼ˆé§è»Šå ´ãƒ‘ã‚ºãƒ«ï¼‰

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€æœ‰åãªãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ã€ŒRush Hourã€ã«ã‚¤ãƒ³ã‚¹ãƒ‘ã‚¤ã‚¢ã•ã‚Œã¦ä½œã£ãŸã‚²ãƒ¼ãƒ ã§ã€èµ¤ã„è»Šã‚’ä»–ã®è»Šã‚’å‹•ã‹ã—ã¦å‡ºå£ã¾ã§å°ãã“ã¨ã§ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ã¨ãªã‚‹ã€‚

---

### ä½œã£ãŸç†ç”±

ãƒˆãƒ­ãƒ³ãƒˆå¤§å­¦ã®**ECE243ï¼ˆComputer Organizationï¼‰**ã®èª²é¡Œã¨ã—ã¦åˆ¶ä½œã—ãŸã€‚  
çµ„ã¿è¾¼ã¿ã‚·ã‚¹ãƒ†ãƒ ã‚„ä½ãƒ¬ãƒ™ãƒ«ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢åˆ¶å¾¡ã‚’å­¦ã¶ä¸€ç’°ã¨ã—ã¦ã€**VGAæç”»**ã‚„**PS/2ãƒ‡ãƒã‚¤ã‚¹ã‹ã‚‰ã®å…¥åŠ›å‡¦ç†**ã‚’Cè¨€èªã§å®Ÿè£…ã—ãŸã€‚

---

### ã‚²ãƒ¼ãƒ æ¦‚è¦

- **CPUlator**ã‚’ä½¿ã£ã¦ã€ä»®æƒ³çš„ã«DE1-SoCãƒœãƒ¼ãƒ‰ã®å‹•ä½œã‚’å†ç¾ã€‚
- é§è»Šå ´ã®ã‚°ãƒªãƒƒãƒ‰ä¸Šã«ãƒ©ãƒ³ãƒ€ãƒ ã«é…ç½®ã•ã‚ŒãŸè»Šã‚’å‹•ã‹ã—ã¦ã€èµ¤ã„è»Šã‚’å‡ºå£ã¸ã¨å°ãã¾ã™ã€‚
- è»Šã¯å‘ã„ã¦ã„ã‚‹æ–¹å‘ã«ã—ã‹å‹•ã‹ã›ã¾ã›ã‚“ï¼ˆæ¨ªå‘ãï¼å·¦å³ã€ç¸¦å‘ãï¼ä¸Šä¸‹ï¼‰ã€‚
- èµ¤ã„è»Šã®å…ˆç«¯ãŒå‡ºå£ã«é”ã™ã‚‹ã¨ãƒ‘ã‚ºãƒ«ã‚¯ãƒªã‚¢ã¨ãªã‚Šã¾ã™ã€‚
- ã‚²ãƒ¼ãƒ ä¸­ã¯ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—ã‚¿ã‚¤ãƒãƒ¼ãŒHEXãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ä¸Šã«æ˜ ã•ã‚Œã€ã‚²ãƒ¼ãƒ ã‚¯ãƒªã‚¢ã«ä½•ç§’ã‹ã‹ã£ãŸã‹è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

---
### ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
![image](https://github.com/user-attachments/assets/59ec1de5-9b02-49c9-a887-f154ea2b9718)

![image](https://github.com/user-attachments/assets/99e93eae-c625-41dc-bc4a-36dbe19ee9d6)

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ãƒ¢å‹•ç”»ã§ã™ ğŸ‘‡

<video src="https://github.com/matsu641/RushHour/raw/main/video.mp4" controls width="600"></video>

---
### ä½¿ã„æ–¹
1.  Enterã‚’æŠ¼ã™ã€‚
2.   å‹•ã‹ã—ãŸã„è»Šã«å¯¾å¿œã™ã‚‹ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã‚’ã‚­ãƒ¼ã§æ‰“ã¤ã€‚
3.   èµ¤ã„è»Šã‚’å‡ºå£ã«é”ã™ã‚‹ã‚ˆã†ã«ãƒ‘ã‚ºãƒ«ã‚’è§£ãã€‚
---
### å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

1. **è¡¨ç¤ºã¨ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯**
   - VGAå‡ºåŠ›ï¼ˆä»®æƒ³ï¼‰ã‚’ä½¿ã£ã¦2Dã‚°ãƒªãƒƒãƒ‰ã‚’æç”»ã€‚
   - å„è»Šã¯ç•°ãªã‚‹è‰²ã®é•·æ–¹å½¢ã§è¡¨ç¤ºã€‚

2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›**
   - PS/2ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼ˆCPUlatorä¸Šã§ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰ã‚’ä½¿ç”¨ã€‚
   - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼š`A`, `B`ãªã©ã®ã‚­ãƒ¼ã§è»Šé¸æŠã€çŸ¢å°ã‚­ãƒ¼ã§ç§»å‹•ã€‚

3. **ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯**
   - è»Šã®ä½ç½®ã¨å‘ãã¯å†…éƒ¨ã®æ§‹é€ ä½“ã§ç®¡ç†ã€‚
   - ä»–ã®è»Šã¨ã®è¡çªã‚„æ å¤–ã¸ã®ç§»å‹•ã‚’é˜²ããƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè£…ã€‚
   - è»Šã®é¸æŠãƒ»ç§»å‹•æ™‚ã€ã‚¯ãƒªã‚¢æ™‚ã«ãƒ“ãƒ¼ãƒ—éŸ³ãŒé³´ã‚‹ã‚ˆã†å®Ÿè£…ã€‚

4. **ãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒ¢**
   - æ­£ã—ãç§»å‹•ã§ãã‚‹ã‹ã€è¡çªåˆ¤å®šãŒæ©Ÿèƒ½ã—ã¦ã„ã‚‹ã‹ã‚’ç¢ºèªã€‚
   - ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ã¨ã‚¯ãƒªã‚¢ã®ä¸€ä¾‹ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä¸Šã§å‹•ä½œç¢ºèªæ¸ˆã¿ã€‚

---

### å®Ÿè¡Œç’°å¢ƒãƒ»é–‹ç™ºç’°å¢ƒ

- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **ï¼šCPUlator (https://cpulator.01xz.net/)
- **å¯¾è±¡ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ï¼šRISC-V (DE1-SoC Simulator ãƒ¢ãƒ¼ãƒ‰)
- **é–‹ç™ºè¨€èª**ï¼šCè¨€èª
- **å…¥åŠ›ãƒ‡ãƒã‚¤ã‚¹**ï¼šPS/2ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼ˆIRQ line 22ã‹ã‚‰å‰²ã‚Šè¾¼ã¿ï¼‰
- **å‡ºåŠ›ãƒ‡ãƒã‚¤ã‚¹**ï¼šVGAãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ï¼ˆdouble bufferingä½¿ç”¨ï¼‰

---

### æˆæœç‰©

- **ã‚²ãƒ¼ãƒ æœ¬ä½“**ï¼šCè¨€èªã§è¨˜è¿°ã•ã‚ŒãŸãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ ï¼ˆCPUlatorä¸Šã§å‹•ä½œï¼‰
- **ãƒ¬ãƒãƒ¼ãƒˆ**ï¼šè¨­è¨ˆæ–¹é‡ã€ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€FSMã‚„æç”»å‡¦ç†ã®è©³ç´°ã€ãƒ†ã‚¹ãƒˆå†…å®¹
- **ã‚³ãƒ¼ãƒ‰**ï¼šæç”»ã€å…¥åŠ›ã€ãƒ­ã‚¸ãƒƒã‚¯ã‚’å®Ÿç¾ã™ã‚‹ã™ã¹ã¦ã®Cã‚³ãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«

---

### å®Ÿè£…äºˆå®šã®æ©Ÿèƒ½
- è»Šã®ç§»å‹•ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ»‘ã‚‰ã‹ã«22ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã§ç§»å‹•ï¼‰
- PS/2ãƒã‚¦ã‚¹ã«ã‚ˆã‚‹è»Šã®é¸æŠ
- è»Šã®é¸æŠæ™‚ï¼ç§»å‹•æ™‚ã®ãƒ“ãƒ¼ãƒ—éŸ³
- å‹åˆ©æ™‚ã®ã‚µã‚¦ãƒ³ãƒ‰å†ç”Ÿ
-ã€ŒSUCCESS!ã€ã®å‹åˆ©ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

---

### Rush Hour Puzzle Game â€“ FPGA-Based Implementation

---

**Project Overview**  
Inspired by the classic *Rush Hour* puzzle game, this project challenges players to move surrounding vehicles and clear a path to guide the red car to the exit. The game was developed as part of the ECE243 (Computer Organization) course at the University of Toronto, with the goal of gaining hands-on experience in embedded systems and low-level hardware control.

---
**Why I Built It**  
The project served as a practical exercise in system-level C programming, memory-mapped I/O, and interrupt-driven input/output. It was implemented entirely in C and designed to run on a simulated DE1-SoC FPGA board using the CPUlator platform.

---
### Demonstration
![image](https://github.com/user-attachments/assets/59ec1de5-9b02-49c9-a887-f154ea2b9718)

![image](https://github.com/user-attachments/assets/99e93eae-c625-41dc-bc4a-36dbe19ee9d6)
---
**Gameplay Summary**  
- Players move cars within a parking lot grid to free the red car and reach the exit.
- Vehicles can only move along their orientation (horizontal â†’ left/right, vertical â†’ up/down).
- The game tracks the elapsed time using a count-up timer displayed on the HEX display.
- The puzzle is cleared once the red car reaches the designated exit area.
---
**How It Works**  
1. Press `Enter` to begin.  
2. Select a car using its assigned letter (e.g., `A`, `B`, etc.).  
3. Move the car using arrow keys to solve the puzzle.
---
**Technical Highlights**  
- **Graphics & Display**:  
  - Simulated VGA output is used to render a colorful 2D grid.  
  - Each vehicle is displayed as a colored rectangle with distinct identifiers.  
  - Double buffering ensures flicker-free visual updates.  
- **User Input**:  
  - PS/2 keyboard input is handled via interrupt (IRQ line 22).  
  - Keyboard controls include car selection (A, B...) and movement via arrow keys.  
- **Game Logic**:  
  - Vehicle states (position, orientation) are managed via C structures.  
  - Validations prevent overlaps and boundary violations.  
  - Beep sounds are triggered on selection, movement, and puzzle completion.  
- **Testing & Demonstration**:  
  - Collision detection and movement were tested in various scenarios.  
  - Full gameplay and puzzle completion were demonstrated successfully on CPUlator.
---
**Development Environment**  
- **Platform**: [CPUlator](https://cpulator.01xz.net/)  
- **Architecture**: RISC-V (DE1-SoC simulation mode)  
- **Language**: C  
- **Input**: Simulated PS/2 Keyboard  
- **Output**: VGA display with double buffering  
---
**Deliverables**  
- Complete source code (modularized: drawing, input, logic)  
- Design documentation detailing FSMs, data structures, and rendering logic  
- Final report including implementation strategy, testing procedures, and future plans  
---
**Planned Enhancements**  
- Smooth car animation in 22-pixel steps  
- Car selection via PS/2 mouse  
- Enhanced sound effects during interaction and a "SUCCESS!" victory message with celebratory audio  

---
